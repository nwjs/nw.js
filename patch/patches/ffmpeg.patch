diff --git a/BUILD.gn b/BUILD.gn
index 42d85c9651..0adeafc712 100755
--- BUILD.gn
+++ BUILD.gn
@@ -407,6 +407,12 @@ if (is_component_ffmpeg) {
     # So we can append below and assume they're defined.
     ldflags = []
 
+    if (is_mac) {
+      ldflags += [
+        "-Wl,-install_name,@loader_path/libffmpeg.dylib"
+      ]
+    }
+
     if (is_posix && !is_mac) {
       # Fixes warnings PIC relocation when building as component.
       ldflags += [
diff --git a/chromium/config/Chromium/linux-noasm/x64/config.h b/chromium/config/Chromium/linux-noasm/x64/config.h
index 019e07ea03..d2c36427b5 100644
--- chromium/config/Chromium/linux-noasm/x64/config.h
+++ chromium/config/Chromium/linux-noasm/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --disable-asm --disable-inline-asm --enable-pic --enable-lto"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --disable-asm --disable-inline-asm --enable-pic --enable-lto"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/ia32/config.asm b/chromium/config/Chromium/linux/ia32/config.asm
index ac6e0242a7..7055da6a6b 100644
--- chromium/config/Chromium/linux/ia32/config.asm
+++ chromium/config/Chromium/linux/ia32/config.asm
@@ -534,7 +534,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -601,8 +601,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -941,7 +941,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1247,7 +1247,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/ia32/config.h b/chromium/config/Chromium/linux/ia32/config.h
index 8688c66b23..53e618ec6c 100644
--- chromium/config/Chromium/linux/ia32/config.h
+++ chromium/config/Chromium/linux/ia32/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --arch=i686 --extra-cflags='\"-m32\"' --extra-ldflags='\"-m32\"' --enable-yasm --enable-pic"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --arch=i686 --extra-cflags='\"-m32\"' --extra-ldflags='\"-m32\"' --enable-yasm --enable-pic"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/x64/config.asm b/chromium/config/Chromium/linux/x64/config.asm
index a88cd1b70a..4dbc0dbb96 100644
--- chromium/config/Chromium/linux/x64/config.asm
+++ chromium/config/Chromium/linux/x64/config.asm
@@ -534,7 +534,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -601,8 +601,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -941,7 +941,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1247,7 +1247,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/linux/x64/config.h b/chromium/config/Chromium/linux/x64/config.h
index 4b4c5f33ed..2044883b96 100644
--- chromium/config/Chromium/linux/x64/config.h
+++ chromium/config/Chromium/linux/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-lto"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/usr/local/google/home/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-lto"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/mac/x64/config.asm b/chromium/config/Chromium/mac/x64/config.asm
index ae54615f75..040646de73 100644
--- chromium/config/Chromium/mac/x64/config.asm
+++ chromium/config/Chromium/mac/x64/config.asm
@@ -534,7 +534,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -601,8 +601,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -941,7 +941,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1247,7 +1247,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/mac/x64/config.h b/chromium/config/Chromium/mac/x64/config.h
index a6e932b809..f87c251e95 100644
--- chromium/config/Chromium/mac/x64/config.h
+++ chromium/config/Chromium/mac/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/Users/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags=-O2 --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-yasm --cc=clang --cxx=clang++ --extra-libs=-lopus --arch=x86_64 --extra-cflags=-m64 --extra-ldflags=-m64"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/Users/tguilbert/Code/chromium/src/third_party/opus/src/include --optflags=-O2 --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --enable-pic --enable-yasm --cc=clang --cxx=clang++ --extra-libs=-lopus --arch=x86_64 --extra-cflags=-m64 --extra-ldflags=-m64"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/ia32/config.asm b/chromium/config/Chromium/win/ia32/config.asm
index 3ea30758f7..b60ba36794 100644
--- chromium/config/Chromium/win/ia32/config.asm
+++ chromium/config/Chromium/win/ia32/config.asm
@@ -534,7 +534,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -601,8 +601,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -941,7 +941,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1247,7 +1247,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/ia32/config.h b/chromium/config/Chromium/win/ia32/config.h
index 94f535e505..4f1bafd6a0 100644
--- chromium/config/Chromium/win/ia32/config.h
+++ chromium/config/Chromium/win/ia32/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/x64/config.asm b/chromium/config/Chromium/win/x64/config.asm
index 232599221d..90c64c1f57 100644
--- chromium/config/Chromium/win/x64/config.asm
+++ chromium/config/Chromium/win/x64/config.asm
@@ -534,7 +534,7 @@
 %define CONFIG_FFPROBE 0
 %define CONFIG_FFSERVER 0
 %define CONFIG_FFMPEG 0
-%define CONFIG_DCT 0
+%define CONFIG_DCT 1
 %define CONFIG_DWT 0
 %define CONFIG_ERROR_RESILIENCE 0
 %define CONFIG_FAAN 1
@@ -601,8 +601,8 @@
 %define CONFIG_LZF 0
 %define CONFIG_ME_CMP 0
 %define CONFIG_MPEG_ER 0
-%define CONFIG_MPEGAUDIO 0
-%define CONFIG_MPEGAUDIODSP 0
+%define CONFIG_MPEGAUDIO 1
+%define CONFIG_MPEGAUDIODSP 1
 %define CONFIG_MPEGVIDEO 0
 %define CONFIG_MPEGVIDEOENC 0
 %define CONFIG_MSS34DSP 0
@@ -941,7 +941,7 @@
 %define CONFIG_MP1FLOAT_DECODER 0
 %define CONFIG_MP2_DECODER 0
 %define CONFIG_MP2FLOAT_DECODER 0
-%define CONFIG_MP3_DECODER 0
+%define CONFIG_MP3_DECODER 1
 %define CONFIG_MP3FLOAT_DECODER 0
 %define CONFIG_MP3ADU_DECODER 0
 %define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1247,7 +1247,7 @@
 %define CONFIG_MM_DEMUXER 0
 %define CONFIG_MMF_DEMUXER 0
 %define CONFIG_MOV_DEMUXER 0
-%define CONFIG_MP3_DEMUXER 0
+%define CONFIG_MP3_DEMUXER 1
 %define CONFIG_MPC_DEMUXER 0
 %define CONFIG_MPC8_DEMUXER 0
 %define CONFIG_MPEGPS_DEMUXER 0
@@ -2180,7 +2180,7 @@
 %define CONFIG_MJPEG_PARSER 0
 %define CONFIG_MLP_PARSER 0
 %define CONFIG_MPEG4VIDEO_PARSER 0
-%define CONFIG_MPEGAUDIO_PARSER 0
+%define CONFIG_MPEGAUDIO_PARSER 1
 %define CONFIG_MPEGVIDEO_PARSER 0
 %define CONFIG_OPUS_PARSER 1
 %define CONFIG_PNG_PARSER 0
diff --git a/chromium/config/Chromium/win/x64/config.h b/chromium/config/Chromium/win/x64/config.h
index fe28dcf7f1..510bdae6bf 100644
--- chromium/config/Chromium/win/x64/config.h
+++ chromium/config/Chromium/win/x64/config.h
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac' --enable-parser='opus,vorbis,flac' --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
+#define FFMPEG_CONFIGURATION "--disable-everything --disable-all --disable-doc --disable-htmlpages --disable-manpages --disable-podpages --disable-txtpages --disable-static --enable-avcodec --enable-avformat --enable-avutil --enable-fft --enable-rdft --enable-static --enable-libopus --disable-bzlib --disable-error-resilience --disable-iconv --disable-lzo --disable-network --disable-schannel --disable-sdl --disable-symver --disable-xlib --disable-zlib --disable-securetransport --disable-d3d11va --disable-dxva2 --disable-vaapi --disable-vda --disable-vdpau --disable-videotoolbox --disable-nvenc --disable-cuda --disable-cuvid --enable-decoder='vorbis,libopus,flac,mp3' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_s32le,pcm_f32le' --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-demuxer='ogg,matroska,wav,flac,mp3' --enable-parser='opus,vorbis,flac,mpegaudio' --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/opus/src/include --optflags='\"-O2\"' --enable-decoder='theora,vp8' --enable-parser='vp3,vp8' --toolchain=msvc --cpu=opteron --enable-yasm --extra-cflags=-I/cygdrive/c/src/chromium/src/third_party/ffmpeg/chromium/include/win --cc='cygwin-wrapper cl' --ld='cygwin-wrapper link' --nm='cygwin-wrapper dumpbin -symbols' --ar='cygwin-wrapper lib'"
 #define FFMPEG_LICENSE "LGPL version 2.1 or later"
 #define CONFIG_THIS_YEAR 2017
 #define FFMPEG_DATADIR "/usr/local/share/ffmpeg"
@@ -550,7 +550,7 @@
 #define CONFIG_FFPROBE 0
 #define CONFIG_FFSERVER 0
 #define CONFIG_FFMPEG 0
-#define CONFIG_DCT 0
+#define CONFIG_DCT 1
 #define CONFIG_DWT 0
 #define CONFIG_ERROR_RESILIENCE 0
 #define CONFIG_FAAN 1
@@ -617,8 +617,8 @@
 #define CONFIG_LZF 0
 #define CONFIG_ME_CMP 0
 #define CONFIG_MPEG_ER 0
-#define CONFIG_MPEGAUDIO 0
-#define CONFIG_MPEGAUDIODSP 0
+#define CONFIG_MPEGAUDIO 1
+#define CONFIG_MPEGAUDIODSP 1
 #define CONFIG_MPEGVIDEO 0
 #define CONFIG_MPEGVIDEOENC 0
 #define CONFIG_MSS34DSP 0
@@ -957,7 +957,7 @@
 #define CONFIG_MP1FLOAT_DECODER 0
 #define CONFIG_MP2_DECODER 0
 #define CONFIG_MP2FLOAT_DECODER 0
-#define CONFIG_MP3_DECODER 0
+#define CONFIG_MP3_DECODER 1
 #define CONFIG_MP3FLOAT_DECODER 0
 #define CONFIG_MP3ADU_DECODER 0
 #define CONFIG_MP3ADUFLOAT_DECODER 0
@@ -1263,7 +1263,7 @@
 #define CONFIG_MM_DEMUXER 0
 #define CONFIG_MMF_DEMUXER 0
 #define CONFIG_MOV_DEMUXER 0
-#define CONFIG_MP3_DEMUXER 0
+#define CONFIG_MP3_DEMUXER 1
 #define CONFIG_MPC_DEMUXER 0
 #define CONFIG_MPC8_DEMUXER 0
 #define CONFIG_MPEGPS_DEMUXER 0
@@ -2196,7 +2196,7 @@
 #define CONFIG_MJPEG_PARSER 0
 #define CONFIG_MLP_PARSER 0
 #define CONFIG_MPEG4VIDEO_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 1
 #define CONFIG_MPEGVIDEO_PARSER 0
 #define CONFIG_OPUS_PARSER 1
 #define CONFIG_PNG_PARSER 0
diff --git a/ffmpeg_generated.gni b/ffmpeg_generated.gni
index 41b5ea2208..644142506e 100644
--- ffmpeg_generated.gni
+++ ffmpeg_generated.gni
@@ -17,6 +17,7 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/allcodecs.c",
     "libavcodec/autorename_libavcodec_flacdec.c",
     "libavcodec/autorename_libavcodec_flacdsp.c",
+    "libavcodec/autorename_libavcodec_mpegaudiodsp.c",
     "libavcodec/autorename_libavcodec_utils.c",
     "libavcodec/autorename_libavcodec_vorbisdsp.c",
     "libavcodec/avdct.c",
@@ -29,6 +30,9 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/bsf.c",
     "libavcodec/codec_desc.c",
     "libavcodec/d3d11va.c",
+    "libavcodec/dct.c",
+    "libavcodec/dct32_fixed.c",
+    "libavcodec/dct32_float.c",
     "libavcodec/dirac.c",
     "libavcodec/dv_profile.c",
     "libavcodec/fft_fixed.c",
@@ -51,7 +55,14 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavcodec/mjpegenc_huffman.c",
     "libavcodec/mpeg12framerate.c",
     "libavcodec/mpeg4audio.c",
+    "libavcodec/mpegaudio.c",
+    "libavcodec/mpegaudio_parser.c",
     "libavcodec/mpegaudiodata.c",
+    "libavcodec/mpegaudiodec_fixed.c",
+    "libavcodec/mpegaudiodecheader.c",
+    "libavcodec/mpegaudiodsp_data.c",
+    "libavcodec/mpegaudiodsp_fixed.c",
+    "libavcodec/mpegaudiodsp_float.c",
     "libavcodec/options.c",
     "libavcodec/opus.c",
     "libavcodec/opus_parser.c",
@@ -86,6 +97,7 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_android && curre
     "libavformat/matroska.c",
     "libavformat/matroskadec.c",
     "libavformat/metadata.c",
+    "libavformat/mp3dec.c",
     "libavformat/mux.c",
     "libavformat/oggdec.c",
     "libavformat/oggparsecelt.c",
@@ -188,21 +200,10 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
     "libavcodec/aactab.c",
     "libavcodec/ac3tab.c",
     "libavcodec/autorename_libavcodec_aacdec.c",
-    "libavcodec/autorename_libavcodec_mpegaudiodsp.c",
     "libavcodec/autorename_libavcodec_sbrdsp.c",
     "libavcodec/cbrt_data.c",
-    "libavcodec/dct.c",
-    "libavcodec/dct32_fixed.c",
-    "libavcodec/dct32_float.c",
     "libavcodec/kbdwin.c",
     "libavcodec/mdct15.c",
-    "libavcodec/mpegaudio.c",
-    "libavcodec/mpegaudio_parser.c",
-    "libavcodec/mpegaudiodec_fixed.c",
-    "libavcodec/mpegaudiodecheader.c",
-    "libavcodec/mpegaudiodsp_data.c",
-    "libavcodec/mpegaudiodsp_fixed.c",
-    "libavcodec/mpegaudiodsp_float.c",
     "libavcodec/sinewin.c",
     "libavcodec/sinewin_fixed.c",
     "libavformat/aacdec.c",
@@ -210,7 +211,6 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
     "libavformat/img2.c",
     "libavformat/mov.c",
     "libavformat/mov_chan.c",
-    "libavformat/mp3dec.c",
   ]
 }
 
@@ -218,6 +218,8 @@ if ((is_android && current_cpu == "x64") || (is_android && current_cpu == "x86")
   ffmpeg_c_sources += [
     "libavcodec/x86/autorename_libavcodec_x86_vorbisdsp_init.c",
     "libavcodec/x86/constants.c",
+    "libavcodec/x86/dct_init.c",
+    "libavcodec/x86/mpegaudiodsp.c",
     "libavcodec/x86/fft_init.c",
     "libavcodec/x86/flacdsp_init.c",
     "libavutil/x86/autorename_libavutil_x86_cpu.c",
@@ -280,6 +282,8 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (is_linux && current
 
 if ((is_android && current_cpu == "x64") || (is_linux && current_cpu == "x64") || (is_linux && current_cpu == "x86") || (is_mac) || (is_win)) {
   ffmpeg_yasm_sources += [
+    "libavcodec/x86/dct32.asm",
+    "libavcodec/x86/imdct36.asm",
     "libavcodec/x86/fft.asm",
     "libavcodec/x86/flacdsp.asm",
     "libavcodec/x86/vorbisdsp.asm",
@@ -315,8 +319,6 @@ if ((is_linux && current_cpu == "x64") || (is_linux && current_cpu == "x86") ||
 if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x64" && ffmpeg_branding == "ChromeOS") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "ChromeOS") || (is_win && ffmpeg_branding == "Chrome")) {
   ffmpeg_c_sources += [
     "libavcodec/x86/aacpsdsp_init.c",
-    "libavcodec/x86/dct_init.c",
-    "libavcodec/x86/mpegaudiodsp.c",
     "libavcodec/x86/sbrdsp_init.c",
   ]
 }
@@ -324,8 +326,6 @@ if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_android && curr
 if ((current_cpu == "x64" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x64" && ffmpeg_branding == "ChromeOS") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "Chrome") || (is_linux && current_cpu == "x86" && ffmpeg_branding == "ChromeOS") || (is_win && ffmpeg_branding == "Chrome")) {
   ffmpeg_yasm_sources += [
     "libavcodec/x86/aacpsdsp.asm",
-    "libavcodec/x86/dct32.asm",
-    "libavcodec/x86/imdct36.asm",
     "libavcodec/x86/sbrdsp.asm",
   ]
 }
